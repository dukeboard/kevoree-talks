<section class="slide shout" id="validation">
    <h2 class="h2-list">Validation</h2>
</section>

<section class="slide">
    <div class="guide">
        <div><span class="icon-angle-right"></span>Validation<span class="icon-angle-right"></span>Utilisabilité</div>
    </div>
    <header>
        <h2>Notre abstraction répond-elle à notre objectif ?</h2>
    </header>
    <ul>
        <li class="hidden"><span class="colorOrange">Objectif : Gérer l'adaptation de manière transverse</span></li>
        <li class="hidden"><span class="icon-arrow-right colorOrange"></span><span
                class="colorOrange">Faire de l'adaptation multi-niveau efficace</span></li>
        <li class="hidden">Protocole expérimental
            <ul>
                <li class="next collapse">Utilisation des informations des différents niveaux (infrastructure)
                    <ul>
                        <li>Objectif : Optimisation de l'utilisation de la bande passante</li>
                        <li>Solution : Placer les nœuds de plate-forme ayant des composants qui interagissent sur les mêmes nœuds
                            d'infrastructure
                        </li>
                    </ul>
                </li>
                <li class="next collapse">Coordonner l'adaptation entre les niveaux (Plate-forme)
                    <ul>
                        <li>Objectif : Limiter les migrations de nœuds de plate-forme</li>
                        <li>Solution : remplacer ces migrations par des migrations de composants</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</section>

<section class="slide">
    <header>
        <h2>Cas d'usage : Gestionnaire d'infrastructure</h2>
    </header>
    <img class="next" style="position:absolute;top:150px;left:100px;" height="250px" src="figures/validation/multi-layer-iaas-current.png"/>

    <div class="next">
        <span class="icon-arrow-right" style="position:absolute;top:275px;left:500px;"></span>
        <img style="position:absolute;top:150px;right:100px;" height="250px" src="figures/validation/multi-layer-iaas-new.png"/>
    </div>
</section>

<section class="slide">
    <header>
        <h2>Cas d'usage : Gestionnaire de plate-forme</h2>
    </header>
    <img class="next" style="position:absolute;top:100px;left:100px;" height="300px" src="figures/validation/multi-layer-paas-current.png"/>

    <div class="next">
        <span class="icon-arrow-right" style="position:absolute;top:275px;left:500px;"></span>
        <img style="position:absolute;top:100px;right:100px;" height="300px" src="figures/validation/multi-layer-paas-new-iaas.png"/>
    </div>
    <div class="next">
        <span class="icon-arrow-down" style="position:absolute;bottom:245px;right:250px;"></span>
        <img style="position:absolute;bottom:-10px;right:100px;" height="300px" src="figures/validation/multi-layer-paas-new.png"/>
    </div>
    <div class="next">
        <span class="icon-arrow-left" style="position:absolute;bottom:155px;left:500px;"></span>
        <img style="position:absolute;bottom:-10px;left:100px;" height="300px" src="figures/validation/multi-layer-paas-new-next.png"/>
    </div>
</section>

<section class="slide">
    <div class="guide">
        <div><span class="icon-angle-right"></span>Validation<span class="icon-angle-right"></span>Utilisabilité</div>
    </div>
    <header>
        <h2>Évaluation</h2>
    </header>
    <ul>
        <li class="hidden"><span class="icon-ok-sign colorGreen"></span>Prise en compte des informations de plusieurs niveaux</li>
        <li class="hidden"><span class="icon-ok-sign colorGreen"></span>Coordination de l'adaptation entre plusieurs niveaux</li>
    </ul>
    Peu complexe :
    <table border="1" class="evaluation">
        <tr>
            <td style="width:260px"><b>Gestionnaire</b></td>
            <td style="width:150px">Infrastructure</td>
            <td style="width:130px">Plate-forme</td>
        </tr>
        <tr>
            <td><b>Lignes de code Scala/Java</b></td>
            <td>364</td>
            <td>173</td>
        </tr>
    </table>
</section>

<section class="slide">
    <div class="guide">
        <div><span class="icon-angle-right"></span>Validation<span class="icon-angle-right"></span>Extensibilité & généricité</div>
    </div>
    <header>
        <h2>Notre abstraction est-elle extensible et générique ?</h2>
    </header>
    <ul>
        <li class="hidden">Protocole expérimental
            <ul>
                <li>Définition de nouveaux types de nœuds d'infrastructure</li>
                <li>Définition d'un gestionnaire d'infrastructure</li>
                <li>Évaluation sur la quantité de code nécessaire<span class="cite">*</span>
                    <ul>
                        <li>Comparaison par rapport au code utilisé</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    <p class="cite">
        <span>*</span> utilisation de cloc - <a href="http://cloc.sourceforge.net/">http://cloc.sourceforge.net/</a>
    </p>
</section>

<section class="slide">
    <div class="guide">
        <div><span class="icon-angle-right"></span>Validation<span class="icon-angle-right"></span>Extensibilité & généricité</div>
    </div>
    <header>
        <h2>Cas d'usage</h2>
    </header>
    <ul>
        <li>Implémentation d'un Cloud d'infrastructure hybride
            <ul>
                <li class="hidden">
            <span class="colorOrange">Utilisation d'un système de virtualisation d'espace utilisateur
                (Jails<span class="cite">*1</span>)</span>
                </li>
                <li class="hidden"><span class="colorOrange">Proxy vers un Cloud public
            (Amazon EC2<span class="cite">*2</span>)</span>
                </li>
                <li class="hidden"><span class="colorOrange">Gestionnaire d'infrastructure</span>
                    <ul>
                        <li>Déploiement de machine virtuelle Window sur EC2</li>
                        <li>Déploiement de machine virtuelle Unix/Linux sur Jails</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    <p class="cite">
        <span>*1</span><a href="http://www.freebsd.org/doc/en/books/handbook/jails.html">http://www.freebsd.org/doc/en/books/handbook/jails.html</a><br/>
        <span>*2</span><a href="http://aws.amazon.com/en/ec2">http://aws.amazon.com/en/ec2</a>
    </p>
</section>

<section class="slide">
    <div class="guide">
        <div><span class="icon-angle-right"></span>Validation<span class="icon-angle-right"></span>Extensibilité & généricité</div>
    </div>
    <header>
        <h2>Évaluation</h2>
    </header>
    <img width="600px" src="figures/validation/nbloc-node-type.png"/>
    <p>Peu de code nécessaire par rapport au code fourni</p>
</section>

<section class="slide">
    <div class="guide">
        <div><span class="icon-angle-right"></span>Validation<span class="icon-angle-right"></span>Extensibilité & généricité</div>
    </div>
    <header>
        <h2>Évaluation</h2>
    </header>
    <img width="600px" src="figures/validation/nbloc-manager-type.png"/>
    <p>Peu de code nécessaire par rapport au code fourni</p>
</section>

<section class="slide">
    <div class="guide">
        <div><span class="icon-angle-right"></span>Validation<span class="icon-angle-right"></span>Passage à l'échelle</div>
    </div>
    <header>
        <h2>Notre abstraction passe-t-elle à l'échelle ?</h2>
    </header>
    <ul>
        <li class="hidden">Protocole expérimental
            <ul>
                <li>Soumission de modèle de plate-forme</li>
                <li>Évaluation du temps d'exécution
                    <ol>
                        <li>Définition des nœuds de plate-forme à créer</li>
                        <li>Dissémination du modèle entre plate-forme et infrastructure</li>
                        <li>Placement des nœuds de plate-forme sur l'infrastructure</li>
                    </ol>
                </li>
                <li>Évaluation de la quantité mémoire
                    <ul>
                        <li>Pour le stockage du modèle globale</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</section>

<section class="slide">
    <div class="guide">
        <div><span class="icon-angle-right"></span>Validation<span class="icon-angle-right"></span>Passage à l'échelle</div>
    </div>
    <header>
        <h2>Cas d'usage (1)</h2>
    </header>
    <span class="colorOrange">Intégration Continue</span>
    <blockquote class="next"><!--Continuous Integration (CI) is the practice of merging all developer workspaces with a shared mainline several
        times a day. ...CI was originally intended to be used in combination with automated unit tests written through the practices of Test
        driven development.<span class="cite">*1</span>-->
        L'intégration continue est un ensemble de pratiques utilisées en génie logiciel consistant à vérifier à chaque modification de code
        source que le résultat des modifications ne produit pas de régression dans l'application développée.<span class="cite">*</span>
    </blockquote>
    <ul>
        <li>Cas d'usage important du Cloud : (Travis : 20 000 run/j, 23 102 projets)</li>
        <li class="hidden next"><span class="colorOrange">Consommatrice en temps</span>
            <ul>
                <li class="hidden"><span class="icon-arrow-right colorOrange"></span><span class="colorOrange">Notamment l'exécution des tests</span>
                </li>
                <!--<li class="next">Certains projets nécessite plus de 7 semaines<span class="cite">*2</span></li>-->
            </ul>
        </li>
    </ul>
    <p class="cite">
        <!--<span>*1</span><a href="http://en.wikipedia.org/wiki/Continuous_integration">http://en.wikipedia.org/wiki/Continuous_integration</a><br/>-->
        <span>*</span><a href="http://fr.wikipedia.org/wiki/Intégration_Continue">http://fr.wikipedia.org/wiki/Intégration_Continue</a>
        <!--<br/>
        <span>*2</span>Rothermel, G. et al - Prioritizing test cases for regression testing - 2001-->
    </p>
    <details>
        <b>Consommatrice en temps</b> :
        D'après rothermel, certains gros projets peuvent nécessiter jusqu'à 7 semaines pour vérifier qu'il n'y a pas de régression
    </details>
</section>

<section class="slide">
    <div class="guide">
        <div><span class="icon-angle-right"></span>Validation<span class="icon-angle-right"></span>Passage à l'échelle</div>
    </div>
    <header>
        <h2>Cas d'usage (2)</h2>
    </header>
    <ul>
        <li class="hidden">Solution proposée
            <ul>
                <li class="hidden next"><span class="colorOrange">Effectuer l'exécution des tests sur un Cloud</span>
                    <ul>
                        <li class="next">En parallélisant leur exécution</li>
                        <li class="next">En définissant la plate-forme d'exécution nécessaire
                            <ul>
                                <li class="next">En tenant compte des contraintes spécifiques à chaque test</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</section>

<section class="slide">
    <div class="guide">
        <div><span class="icon-angle-right"></span>Validation<span class="icon-angle-right"></span>Passage à l'échelle</div>
    </div>
    <header>
        <h2>Cas d'usage (3)</h2>
    </header>
    <ul>
        <li>Application sur un exemple concret : Apache Camel<span style="font-size: 18px;">(<a
                href="http://camel.apache.org/">http://camel.apache.org/</a>)</span>
            <ul>
                <li class="hidden next collapse">Implémentation de patrons d'intégration <span class="cite">*</span>
                    <ul>
                        <li>facilite l'intégration d'applications en normalisant les communications entre elles</li>
                    </ul>
                </li>
                <li class="hidden next">175 modules, 3875 suites de tests, 8084 tests</li>
                <li class="hidden next collapse"><span class="colorOrange">Temps d'exécution: 1h40min (sans le Cloud)</span>
                    <ul>
                        <li>Intel R, AtomTM D425 1.8GHz avec 8 Go de mémoire vive</li>
                    </ul>
                </li>
                <li class="hidden next collapse"><span class="colorOrange">Temps d'exécution: 40min (sur le Cloud)</span>
                    <ul>
                        <li>10 machines au niveau infrastructure</li>
                        <li>Intel R, AtomTM D425 1.8GHz avec 8 Go de mémoire vive</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    <p class="cite">
        <span>*</span>Hohpe, G., et al. (2004). Enterprise integration patterns: Designing, building, and deploying messaging solutions.
        Addison-Wesley Professional.
    </p>
    <details>
        <b>Sur le Cloud</b>:<br/>
        7 min pour initialiser l'ensemble des nœuds de plate-forme
        20 min pour le test le plus long
    </details>
</section>

<!--<section class="slide">
    <header>
        <h2>Results</h2>
    </header>
    <ul>
        <li class="next">Execution time: 40min (speedup = 3.40)
            <ul>
                <li>The much longer test is around 20 minutes
                    <ul>
                        <li class="hidden"><span class="colorOrange icon-arrow-right colorOrange"></span>limit the speedup</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li class="next">Able to reuse already defined platform
            <ul>
                <li>Keep alive platform helps to reduce the time needed to start VMs</li>
            </ul>
        </li>
        <li class="next">Use lightweight virtualization
            <ul>
                <li>using user-space virtualization instead of hardware one if possible
                    <ul>
                        <li class="hidden"><span class="colorOrange icon-arrow-right"></span>Managed by the IaaS taking into account PaaS
                            specificities
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</section>-->

<section class="slide">
    <div class="guide">
        <div><span class="icon-angle-right"></span>Validation<span class="icon-angle-right"></span>Passage à l'échelle</div>
    </div>
    <header>
        <h2>Évaluation</h2>
    </header>
    <ul>
        <li><span class="colorOrange">Apache Camel: Premier cas d'usage</span>
            <ul>
                <li>50 nœuds de plate-forme + 3900 élements applicatifs</li>
            </ul>
        </li>
        <li><span class="colorOrange">Génération de plus gros modèle</span>
            <ul>
                <!--<li class="hidden">500 nœuds + 40 000 composants</li>-->
                <li class="hidden">5 000 nœuds de plate-forme + 400 000 élements applicatifs</li>
                <li class="hidden">50 000 nœuds de plate-forme + 400 000 élements applicatifs</li>
                <li class="hidden">100 000 nœuds de plate-forme + 400 000 élements applicatifs</li>
            </ul>
        </li>
        <li><span class="colorOrange">Allocation sur 10 nœuds d'infrastructure</span></li>
    </ul>
    <details>
        environ 4 secondes pour traiter 5000 nœuds du PaaS afin de les distribuer sur une infrastructure
        Ensuite le temps devient assez important mais ce chargement correspond à un chargement complet c'est-à-dire qu'il faut positionner
        l'ensemble des nœuds du PaaS.
        Or dans la réalité, on peut supposer que peu de situation vont nécessiter de placer autant de nœuds d'un coup et on va sans doute se
        retrouver dans des situations avec moins de 5000 nœuds à placer
        On arrive à charger des modèles de la taille de celui d'amazon
    </details>
</section>

<section class="slide">
    <div class="guide">
        <div><span class="icon-angle-right"></span>Validation<span class="icon-angle-right"></span>Passage à l'échelle</div>
    </div>
    <header>
        <h2>Évaluation : Temps d'exécution</h2>
    </header>
    <img height="300px" src="figures/validation/eval_time-new.png"/>

    <p style="line-height: 1;">Surcoût d'exécution acceptable jusqu'à 5000 nœuds comparé au temps nécessaire pour la création des VMs
        (généralement plus de 100s par machine<span class="cite">*</span>)</p>

    <p class="cite"><span>*</span>Mao, M., et al. (2012). A performance study on the vm startup time in the cloud. In Cloud Computing, (pp.
        423-430). IEEE.</p>
    <details>
        <b>Création d'une VM</b> = téléchargement de l'image du disque, réservation des ressources, création de la vm, démarrage de la
        vm<br/>
        Le temps de création varie selon les impléms d'IaaS ainsi que selon le type de vms à créer et selon la charge de la machine qui doit
        héberger cette vm
    </details>
</section>

<section class="slide">
    <div class="guide">
        <div><span class="icon-angle-right"></span>Validation<span class="icon-angle-right"></span>Passage à l'échelle</div>
    </div>
    <header>
        <h2>Évaluation : Usage mémoire</h2>
    </header>
    <ul>
        <li class="hidden">
            <table>
                <tr>
                    <td><img height="260px" src="figures/validation/eval_memory.png"/></td>
                    <td style="vertical-align: top;">
                        <span class="icon-arrow-right colorOrange"></span><span class="colorOrange">Dépend des types</span><br/>
                        <span class="icon-arrow-right colorOrange"></span><span class="colorOrange">Linéaire</span>
                    </td>
                </tr>
            </table>

        <li class="hidden next collapse"><span class="colorOrange">Génération du modèle pour Amazon EC2 (2009)</span><span
                class="cite">*</span>
            <ul>
                <li class="hidden">507000 nœuds (infrastructure + plate-forme) + 400000 éléments</li>
            </ul>
        </li>
        <li class="hidden next"><span class="colorOrange">Taille mémoire : 721,21 Mo</span> (Sans partitionnement ni filtrage)</li>
    </ul>
    <p class="cite">
        <span>*</span>À partir des informations obtenu dans Rosen, G. (2011). Anatomy of an Amazon EC2 Resource ID. et<br/>
        <a href="http://huanliu.wordpress.com/2012/03/13/amazon-data-center-size/">http://huanliu.wordpress.com/2012/03/13/amazon-data-center-size/</a>
    </p>
</section>